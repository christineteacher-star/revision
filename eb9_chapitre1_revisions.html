<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Évaluation Finale : 50 Questions de Français</title>
    <style>
        :root { --primary: #2c3e50; --accent: #2980b9; --success: #27ae60; --error: #e74c3c; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 800px; width: 100%; }
        h1 { color: var(--primary); text-align: center; border-bottom: 3px solid var(--accent); padding-bottom: 10px; margin-top: 0; }
        .info-bar { display: flex; justify-content: space-between; color: #7f8c8d; font-weight: bold; margin-bottom: 15px; background: #f8f9fa; padding: 10px; border-radius: 8px; }
        .question { font-size: 1.2em; margin: 20px 0; min-height: 60px; color: #2c3e50; line-height: 1.5; }
        .options { display: grid; gap: 10px; }
        .opt-btn { padding: 15px; border: 2px solid #eee; border-radius: 10px; background: white; cursor: pointer; text-align: left; font-size: 1em; transition: 0.2s; }
        .opt-btn:hover:not(:disabled) { background: #e3f2fd; border-color: var(--accent); }
        .feedback { margin-top: 20px; padding: 15px; border-radius: 10px; display: none; line-height: 1.4; border-left: 6px solid; }
        .correct { background: #d4edda; color: #155724; border-color: var(--success); }
        .wrong { background: #f8d7da; color: #721c24; border-color: var(--error); }
        .next-btn { display: none; width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 10px; cursor: pointer; margin-top: 20px; font-weight: bold; }
        #final-screen { display: none; text-align: center; }
        .btn-retry { padding: 15px 25px; margin: 10px; cursor: pointer; border-radius: 8px; border: none; font-weight: bold; color: white; }
    </style>
</head>
<body>

<div class="container">
    <div id="quiz-ui">
        <h1 id="title">Quiz : Langue & Autobiographie</h1>
        <div class="info-bar">
            <span id="progress">Question 1 / 50</span>
            <span id="score-display">Score : 0</span>
        </div>
        <div id="q-text" class="question"></div>
        <div id="options" class="options"></div>
        <div id="feedback" class="feedback"></div>
        <button id="next-btn" class="next-btn">Question Suivante &rarr;</button>
    </div>

    <div id="final-screen">
        <h1>Résultats</h1>
        <div style="font-size: 3em; font-weight: bold; color: var(--accent);" id="final-score">0 / 0</div>
        <p id="final-comment"></p>
        <button class="btn-retry" style="background: var(--accent);" onclick="restartAll()">Tout recommencer</button>
        <button id="btn-fix-errors" class="btn-retry" style="background: var(--success);" onclick="retryErrors()">Revoir mes erreurs</button>
    </div>
</div>

<script>
    const allQuestions = [
        // 1-10 : Natures et Fonctions
        { q: "Nature de 'Gratuitement' ?", o: ["Adjectif", "Adverbe", "Nom"], r: 1, e: "Modifie le verbe fournir." },
        { q: "Nature de 'À' ?", o: ["Article", "Préposition", "Pronom"], r: 1, e: "C'est une préposition." },
        { q: "Nature de 'Qui' dans 'L'organisation qui...' ?", o: ["Pronom relatif", "Pronom personnel", "Conjonction"], r: 0, e: "Introduit une relative." },
        { q: "Fonction de 'Connexion' dans 'fournir une connexion' ?", o: ["Sujet", "COD", "COI"], r: 1, e: "Répond à 'fournir quoi ?'." },
        { q: "Nature de 'Dès que' ?", o: ["Coordination", "Subordination", "Adverbe"], r: 1, e: "Introduit une subordonnée de temps." },
        { q: "Nature de 'Du' dans 'la fin du jour' ?", o: ["Article défini", "Article contracté", "Préposition"], r: 1, e: "Du = de + le." },
        { q: "Nature de 'Mais' ?", o: ["Coordination", "Subordination", "Adjectif"], r: 0, e: "Mais, ou, et, donc, or, ni, car." },
        { q: "Nature de 'Certains' dans 'Certains élèves' ?", o: ["Pronom", "Déterminant indéfini", "Adverbe"], r: 1, e: "Détermine le nom élèves." },
        { q: "Nature de 'En' dans 'Grâce à en' ?", o: ["Préposition", "Pronom personnel COI", "Article"], r: 1, e: "Remplace un nom." },
        { q: "Fonction de 'Américaine' dans 'organisation américaine' ?", o: ["Attribut", "Épithète", "Apposition"], r: 1, e: "Placé juste après le nom." },

        // 11-20 : Verbes et Types
        { q: "Lequel est un verbe d'état ?", o: ["Chercher", "Se tenir", "Écrire"], r: 1, e: "Indique une manière d'être." },
        { q: "Lequel est un verbe de pensée ?", o: ["S'habiller", "Savoir", "Entendre"], r: 1, e: "Activité intellectuelle." },
        { q: "Lequel est un verbe d'action ?", o: ["Connaître", "Rougir", "Écrire"], r: 2, e: "Action concrète." },
        { q: "Groupe du verbe 'Aller' ?", o: ["1er", "2e", "3e"], r: 2, e: "Irrégulier malgré sa fin en -er." },
        { q: "Groupe du verbe 'Finir' (nous finissons) ?", o: ["1er", "2e", "3e"], r: 1, e: "Finit en -ir et fait -issant." },
        { q: "Groupe du verbe 'Mourir' ?", o: ["2e", "3e", "1er"], r: 1, e: "Verbe irrégulier du 3e groupe." },
        { q: "Mode de 'En écrivant' ?", o: ["Infinitif", "Gérondif", "Participe"], r: 1, e: "En + participe présent." },
        { q: "Mode de 'Être signalées' ?", o: ["Indicatif", "Infinitif", "Impératif"], r: 1, e: "Infinitif présent passif." },
        { q: "Verbe 'Rougir' est un verbe...", o: ["Action", "État", "Pensée"], r: 1, e: "Exprime un changement d'état." },
        { q: "Mode de 'Saches' dans 'Il faut que tu saches' ?", o: ["Indicatif", "Subjonctif", "Conditionnel"], r: 1, e: "Obligatoire après 'il faut que'." },

        // 21-30 : Conjugaison Présent / Passé / Futur
        { q: "Présent : 'Je (résoudre)' ?", o: ["résouds", "résous", "résolve"], r: 1, e: "Perd son 'd'." },
        { q: "Présent : 'Nous (éteindre)' ?", o: ["éteindons", "éteignons", "éteingnons"], r: 1, e: "Prend 'gn' au pluriel." },
        { q: "Présent : 'Il (appeler)' ?", o: ["appèle", "appelle", "appele"], r: 1, e: "Double 'l' devant 'e' muet." },
        { q: "Présent : 'Tu (jeter)' ?", o: ["jètes", "jettes", "jetes"], r: 1, e: "Double 't' devant 'e' muet." },
        { q: "Présent : 'Il (essuyer)' ?", o: ["essuye", "essuie", "essuis"], r: 1, e: "y -> i devant 'e' muet." },
        { q: "Temps de 'Ils eurent fait' ?", o: ["Passé simple", "Passé antérieur", "Plus-que-parfait"], r: 1, e: "Auxiliaire passé simple + PP." },
        { q: "Temps de 'Elle fut accusée' ?", o: ["Imparfait", "Passé simple passif", "Passé composé"], r: 1, e: "Auxiliaire être passé simple + PP." },
        { q: "Temps de 'Je suis née' ?", o: ["Présent", "Passé composé", "Imparfait"], r: 1, e: "Naître au passé composé." },
        { q: "Temps de 'Il avait préparé' ?", o: ["Plus-que-parfait", "Passé composé", "Futur"], r: 0, e: "Auxiliaire imparfait + PP." },
        { q: "Futur de 'Savoir' (Je) ?", o: ["savrai", "saurai", "saurais"], r: 1, e: "Radical en aur-." },

        // 31-40 : Morphologie et Lexique
        { q: "Préfixe de 'Impossibilité' ?", o: ["Im-", "Possible", "-ité"], r: 0, e: "Indique la négation." },
        { q: "Suffixe de 'Indomptable' ?", o: ["In-", "Dompt", "-able"], r: 2, e: "Indique la possibilité." },
        { q: "Radical de 'Renversement' ?", o: ["Re-", "Verser", "-ment"], r: 1, e: "Vient du verbe verser." },
        { q: "Nature de 'Indomptable' ?", o: ["Nom", "Adjectif", "Verbe"], r: 1, e: "Qualifie un nom." },
        { q: "Défaut de celui qui se croit supérieur ?", o: ["Hypocrite", "Arrogant", "Maniaque"], r: 1, e: "L'arrogance." },
        { q: "Contraire de 'Pessimiste' ?", o: ["Optimiste", "Idéaliste", "Ambitieux"], r: 0, e: "Voit le bon côté." },
        { q: "Qualité de celui qui est discret ?", o: ["Violent", "Indifférent", "Sincère"], r: 2, e: "Lié à la franchise." },
        { q: "Sens de 'Viscosité' ?", o: ["Solidité", "Résistance d'un fluide", "Vitesse"], r: 1, e: "Comme le miel ou l'huile." },
        { q: "Adjectif de 'Ambition' ?", o: ["Ambitiel", "Ambitieux", "Ambité"], r: 1, e: "Fait partie de la même famille." },
        { q: "Sens de 'Indocilité' ?", o: ["Obéissance", "Désobéissance", "Douceur"], r: 1, e: "Refus d'être docile." },

        // 41-50 : Discours et Autobiographie
        { q: "Pacte autobiographique : qui doit être identique ?", o: ["Auteur/Narrateur/Personnage", "Auteur/Lecteur", "Héros/Méchant"], r: 0, e: "C'est la base du genre." },
        { q: "Discours indirect : Il dit : 'Je viens'.", o: ["Il dit qu'il vient.", "Il dit de venir.", "Il demande s'il vient."], r: 0, e: "Utilise 'que'." },
        { q: "Type de phrase : 'Où as-tu acheté ta robe ?'", o: ["Déclarative", "Interrogative", "Injonctive"], r: 1, e: "Pose une question." },
        { q: "Type de texte d'une recette ?", o: ["Narratif", "Injonctif", "Descriptif"], r: 1, e: "Donne des ordres/conseils." },
        { q: "Discours indirect : 'Est-ce que tu viendras ?'", o: ["Elle demande si je viendrai.", "Elle demande que je vienne.", "Elle dit de venir."], r: 0, e: "Est-ce que -> Si." },
        { q: "Valeur de l'imparfait dans une description ?", o: ["Action brève", "Arrière-plan", "Futur proche"], r: 1, e: "Sert à poser le décor." },
        { q: "Conjonction de coordination marquant l'opposition ?", o: ["Et", "Mais", "Donc"], r: 1, e: "Indique un contraste." },
        { q: "Le 'Pacte' est un contrat de...", o: ["Fiction", "Vérité", "Mensonge"], r: 1, e: "L'auteur promet de ne pas mentir." },
        { q: "Nature de 'Sauf' ?", o: ["Préposition", "Adverbe", "Nom"], r: 0, e: "Introduit une exception." },
        { q: "Participe passé de 'Naître' ?", o: ["Naissu", "Né", "Nait"], r: 1, e: "S'accorde avec être." }
    ];

    let currentQuestions = [...allQuestions];
    let currentIndex = 0;
    let score = 0;
    let errorIndices = [];

    function loadQuestion() {
        const data = currentQuestions[currentIndex];
        document.getElementById('progress').innerText = `Question ${currentIndex + 1} / ${currentQuestions.length}`;
        document.getElementById('score-display').innerText = `Score : ${score}`;
        document.getElementById('q-text').innerText = data.q;
        document.getElementById('feedback').style.display = "none";
        document.getElementById('next-btn').style.display = "none";
        
        const box = document.getElementById('options');
        box.innerHTML = "";
        data.o.forEach((opt, i) => {
            const b = document.createElement('button');
            b.className = "opt-btn";
            b.innerText = opt;
            b.onclick = () => check(i);
            box.appendChild(b);
        });
    }

    function check(idx) {
        const data = currentQuestions[currentIndex];
        const buttons = document.getElementsByClassName('opt-btn');
        for(let b of buttons) b.disabled = true;

        const f = document.getElementById('feedback');
        f.style.display = "block";
        
        if(idx === data.r) {
            score++;
            f.className = "feedback correct";
            f.innerHTML = "<b>Bravo !</b> " + data.e;
        } else {
            // On stocke la question si erreur (pour le mode "revoir erreurs")
            if (!errorIndices.includes(data)) errorIndices.push(data);
            f.className = "feedback wrong";
            f.innerHTML = "<b>Erreur...</b> La réponse était : " + data.o[data.r] + ". " + data.e;
        }
        document.getElementById('next-btn').style.display = "block";
    }

    document.getElementById('next-btn').onclick = () => {
        currentIndex++;
        if(currentIndex < currentQuestions.length) loadQuestion();
        else showFinal();
    };

    function showFinal() {
        document.getElementById('quiz-ui').style.display = "none";
        document.getElementById('final-screen').style.display = "block";
        document.getElementById('final-score').innerText = `${score} / ${currentQuestions.length}`;
        document.getElementById('btn-fix-errors').style.display = errorIndices.length > 0 ? "inline-block" : "none";
    }

    function restartAll() {
        currentQuestions = [...allQuestions];
        currentIndex = 0;
        score = 0;
        errorIndices = [];
        document.getElementById('quiz-ui').style.display = "block";
        document.getElementById('final-screen').style.display = "none";
        loadQuestion();
    }

    function retryErrors() {
        currentQuestions = [...errorIndices];
        currentIndex = 0;
        score = 0;
        errorIndices = [];
        document.getElementById('quiz-ui').style.display = "block";
        document.getElementById('final-screen').style.display = "none";
        loadQuestion();
    }

    loadQuestion();
</script>
</body>
</html>